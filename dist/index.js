var S=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var k=(a,t)=>{for(var e in t)S(a,e,{get:t[e],enumerable:!0})},B=(a,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of M(t))!w.call(a,r)&&r!==e&&S(a,r,{get:()=>t[r],enumerable:!(i=j(t,r))||i.enumerable});return a};var E=a=>B(S({},"__esModule",{value:!0}),a);var A=(a,t,e)=>new Promise((i,r)=>{var o=l=>{try{u(e.next(l))}catch(d){r(d)}},n=l=>{try{u(e.throw(l))}catch(d){r(d)}},u=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,n);u((e=e.apply(a,t)).next())});var W={};k(W,{bufferAsync:()=>z,isEmailSync:()=>U,maximumLength:()=>J,minValue:()=>Q,minimumLength:()=>D,required:()=>L,throttleQueueAsync:()=>T,useValidation:()=>O,validateIf:()=>N});module.exports=E(W);function z(a){let t=0,e;return(...i)=>{var o;let r=++t;return e=(o=e==null?void 0:e.then(()=>{if(t==r)return e=a(...i).then(n=>(e=void 0,n)),e}))!=null?o:a(...i).then(n=>(e=void 0,n)),e}}function T(a,t){let e=0,i;return(...r)=>new Promise(o=>{let n=++e,u=new Date().getTime();i!=null||(i=u-t);let l=u-i-t;l<0?new Promise(d=>setTimeout(d,-1*l)).then(()=>{i=new Date().getTime(),n==e&&o(a(...r)),o(void 0)}):(i=u,o(a(...r)))})}function b(a,t=e=>e){return a.reduce((e,i)=>{if(i!=null){let r=t(i);r!=null&&e.push(r)}return e},[])}function F(a){return a.reduce((t,e)=>{if(e!=null)if(e instanceof Array)for(let i of e)i!=null&&t.push(i);else t.push(e);return t},[])}function L(){return a=>({isValid:a.value!=null&&String(a.value).trim().length>0,errorMessage:"This field is required"})}function N(a,t){return e=>A(this,null,function*(){if(a(e.parent,e.args)==!1)return{isValid:!0};let i=[],r=[];for(let l of t){let d=l(e);d instanceof Promise?i.push(d):r.push(d)}let o=yield Promise.all(i);r.push(...b(o));let n=r.filter(l=>!l.isValid).map(l=>l.errorMessage),u=F(n);return{isValid:r.every(l=>l.isValid==!0),errorMessage:u}})}function D(a){return t=>{var i;let e=String((i=t.value)!=null?i:"");return{isValid:e.length>=a,errorMessage:`Too short (${e.length} / ${a})`}}}function J(a){return t=>{var e,i,r,o;return{isValid:((i=(e=t.value)==null?void 0:e.length)!=null?i:0)<=a,errorMessage:`Too long (${(o=(r=t.value)==null?void 0:r.length)!=null?o:0} / ${a})`}}}function Q(a){return t=>({isValid:t.value!=null&&t.value>=a,errorMessage:`Must be atleast ${a}`})}function U(){return a=>({isValid:a.value?RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(a.value):!1,errorMessage:"Invalid email format"})}var c=require("vue");var Z=(0,c.ref)(0);function O(a){var m;(m=a.delayReactiveValidation)!=null||(a.delayReactiveValidation=!0);let{objectToValidate:t,validation:e,delayReactiveValidation:i,args:r}=a,o=(0,c.ref)(!1),n=(0,c.computed)(()=>l.some(P=>P.validationState.isValidating)),u=(0,c.computed)(()=>l.every(g=>g.reactiveIsValid.value&&g.lazyIsValid.value)),l=[],d=(0,c.reactive)({}),v=(0,c.ref)(JSON.stringify(a.objectToValidate.value)),V=(0,c.computed)(()=>v.value!==JSON.stringify(a.objectToValidate.value));if((e==null?void 0:e.$reactive)!=null||(e==null?void 0:e.$lazy)!=null||(e==null?void 0:e.$each)!=null){let R=I(t,e);d=(0,c.reactive)(R.validationState),l=[R]}else{console.log("Complex object");let P=t,g=e,R=G(P.value,g);d=(0,c.reactive)(R.state),l=R.validationConfigs}(0,c.watch)(a.objectToValidate,()=>{i?o.value==!0&&K(l,t,r,!0,!1):K(l,t,r,!0,!1)},{deep:!0});function y(){return A(this,null,function*(){let P=yield K(l,t,r,!0,!0);return o.value=!0,P})}function f(P){v.value=JSON.stringify(P)}return(0,c.reactive)({hasValidated:o,validate:y,isValidating:n,propertyState:d,isValid:u,setReference:f,isDirty:V})}function q(a,t,e,i){return A(this,null,function*(){var v,V;if(a.validation.$reactive==null)return!0;a.validatingReactive.value=!0;let r=a.validation.$reactive,o=!0;(a.syncValidators.$reactive||a.asyncValidators.$reactive)&&(o=!1,r=((v=a.syncValidators.$reactive)!=null?v:[]).concat((V=a.asyncValidators.$reactive)!=null?V:[]));let n=!0,u=0;function l(s){let y;if(i==a.validationIterationId)for(let f=0;f<s.length;f++)s[f].isValid==!1&&(n=!1),s[f].identifier=`validator-reactive-${a.id}-${u++}`,y=a.reactiveValidationResults.value.find(m=>m.identifier==s[f].identifier),y!=null?Object.assign(y,s[f]):a.reactiveValidationResults.value.push(s[f])}let d=x(a.property.value,t,e,r,l);if(o){let s=[];for(let y of d.asyncValidators)s.push(T(y,1e3));a.asyncValidators.$reactive=s,a.syncValidators.$reactive=d.syncValidators}return l(d.syncResults),yield Promise.all(d.asyncPromises),i==a.validationIterationId&&(a.reactiveIsValid.value=n,a.validatingReactive.value=!1),a.reactiveIsValid.value})}function H(a,t,e,i){return A(this,null,function*(){var v,V;if(a.validation.$lazy==null)return!0;a.validatingLazy.value=!0;let r=!0,o=0,n=!0,u=a.validation.$lazy;(a.syncValidators.$lazy||a.asyncValidators.$lazy)&&(n=!1,u=((v=a.syncValidators.$lazy)!=null?v:[]).concat((V=a.asyncValidators.$lazy)!=null?V:[]));function l(s){let y;if(i==a.validationIterationId)for(let f=0;f<s.length;f++)s[f].isValid==!1&&(r=!1),s[f].identifier=`validator-lazy-${a.id}-${o++}`,y=a.lazyValidationResults.value.find(m=>m.identifier==s[f].identifier),y!=null?Object.assign(y,s[f]):a.lazyValidationResults.value.push(s[f])}let d=x(a.property.value,t,e,u,l);if(n){let s=[];for(let y of d.asyncValidators)s.push(T(y,500));a.asyncValidators.$lazy=s,a.syncValidators.$lazy=d.syncValidators}return l(d.syncResults),yield Promise.all(d.asyncPromises),i==a.validationIterationId&&(a.lazyIsValid.value=r,a.validatingLazy.value=!1),a.lazyIsValid.value})}function K(a,t,e,i,r){return A(this,null,function*(){let o=[];for(let n of a){let u=++n.validationIterationId;if(i&&o.push(q(n,t.value,e,u)),r&&o.push(H(n,t.value,e,u)),n.elementValidation!=null){let l=[];for(let d in n.arrayConfigMap)l.push(...n.arrayConfigMap[d].validationConfigs);o.push(K(l,t,e,i,r))}}return Promise.all(o).then(n=>n.every(u=>u==!0))})}function x(a,t,e,i=[],r){let o=[],n=[],u=[],l=[];for(let d of i){let v=d({value:a,parent:t,args:e});v instanceof Promise?(o.push(v.then(V=>V?r([V]):void 0)),l.push(d)):(n.push(v),u.push(d))}return{syncResults:n,asyncPromises:o,syncValidators:u,asyncValidators:l}}function I(a,t){var u,l,d,v;let e=t.$each!=null,i=(0,c.reactive)({isValid:(0,c.computed)(()=>{var y,f;let V=(y=n.lazyIsValid.value)!=null?y:!1,s=(f=n.reactiveIsValid.value)!=null?f:!1;return V&&s}),isValidating:(0,c.computed)(()=>n.validatingReactive.value||n.validatingLazy.value),isErrored:(0,c.computed)(()=>i.validationResults.some(V=>V.isValid==!1)),errorMessages:(0,c.computed)(()=>F(b(i.validationResults,V=>V.isValid?void 0:V.errorMessage))),validationResults:(0,c.computed)(()=>{var V,s;return((V=n.reactiveValidationResults.value)!=null?V:[]).concat((s=n.lazyValidationResults.value)!=null?s:[])}),arrayState:(0,c.computed)(()=>{if(Array.isArray(a.value)===!1)return;console.time("array state");let V=a.value,s=n.elementValidation,y=n.arrayConfigMap,f=(s==null?void 0:s.$reactive)!=null||(s==null?void 0:s.$lazy)!=null,m,P=[];for(let R=0;R<V.length;R++)if(V[R].$ffId===void 0&&Object.defineProperty(V[R],"$ffId",{value:`${n.id}-${n.elementId++}`,writable:!1,configurable:!1,enumerable:!1}),m=V[R].$ffId,P.push(m),!y[m])if(f){let h=s,$=(0,c.computed)(()=>V[R]),p=I($,h);y[m]={validationConfigs:[p],validationState:p.validationState}}else{let h=V[R],p=G(h,s);y[m]={validationConfigs:p.validationConfigs,validationState:p.state}}let g=[];for(let R=0;R<P.length;R++)g.push(y[P[R]].validationState);return console.timeEnd("array state"),g})}),r=!(((l=(u=t.$lazy)==null?void 0:u.length)!=null?l:-1)>0),o=!(((v=(d=t.$reactive)==null?void 0:d.length)!=null?v:-1)>0),n={id:Z.value++,validationIterationId:0,reactiveIsValid:(0,c.ref)(o),reactiveValidationResults:(0,c.ref)([]),validatingReactive:(0,c.ref)(!1),lazyIsValid:(0,c.ref)(r),lazyValidationResults:(0,c.ref)([]),validatingLazy:(0,c.ref)(!1),validation:t,syncValidators:{},asyncValidators:{},property:a,validationState:i,arrayConfigMap:{},hasElementValidation:e,elementId:0,elementValidation:t.$each};return n}function G(a,t){let e=[],i={};console.log("Performing complex validation setup",t),t!=null&&r(a,t);function r(o,n){var u,l,d;for(let v in n){let V=(0,c.computed)(()=>o[v]),s=((u=n[v])==null?void 0:u.$reactive)!=null||((l=n[v])==null?void 0:l.$lazy)!=null||((d=n[v])==null?void 0:d.$each)!=null;if(s){let y=n[v],f=I(V,y);e.push(f),i[v]=f.validationState}else if(s==!1){let y={},f=n[v];i[v]=y,r(V,f)}}}return{validationConfigs:e,state:i}}0&&(module.exports={bufferAsync,isEmailSync,maximumLength,minValue,minimumLength,required,throttleQueueAsync,useValidation,validateIf});
