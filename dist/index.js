var O=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var U=(a,e)=>{for(var t in e)O(a,t,{get:e[t],enumerable:!0})},Z=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of q(e))!E.call(a,r)&&r!==t&&O(a,r,{get:()=>e[r],enumerable:!(i=Q(e,r))||i.enumerable});return a};var W=a=>Z(O({},"__esModule",{value:!0}),a);var b=(a,e,t)=>new Promise((i,r)=>{var o=n=>{try{V(t.next(n))}catch(l){r(l)}},d=n=>{try{V(t.throw(n))}catch(l){r(l)}},V=n=>n.done?i(n.value):Promise.resolve(n.value).then(o,d);V((t=t.apply(a,e)).next())});var ra={};U(ra,{bufferAsync:()=>h,isEmailSync:()=>ta,maxLength:()=>_,maxNumber:()=>ea,minLength:()=>Y,minNumber:()=>aa,required:()=>H,throttleQueueAsync:()=>G,useValidation:()=>C,validateIf:()=>X});module.exports=W(ra);function h(a){let e=0,t;return(...i)=>{var o;let r=++e;return t=(o=t==null?void 0:t.then(()=>{if(e===r)return t=a(...i).then(d=>(t=void 0,d)),t}))!=null?o:a(...i).then(d=>(t=void 0,d)),t}}function G(a,e){let t=0,i;return(...r)=>new Promise(o=>{let d=++t,V=new Date().getTime();i!=null||(i=V-e);let n=V-i-e;n<0?new Promise(l=>setTimeout(l,-1*n)).then(()=>{i=new Date().getTime(),d===t&&o(a(...r)),o(void 0)}):(i=V,o(a(...r)))})}function j(a,e=t=>t){return a.reduce((t,i)=>{if(i!==void 0){let r=e(i);r!==void 0&&t.push(r)}return t},[])}function M(a){return a.reduce((e,t)=>{if(t!==void 0)if(t instanceof Array)for(let i of t)i!==void 0&&e.push(i);else e.push(t);return e},[])}function H(){return a=>({isValid:a.value!==void 0&&String(a.value).trim().length>0,errorMessage:"This field is required"})}function X(a,e){return t=>b(this,null,function*(){return(yield a(t))===!1?{isValid:!0}:e})}function Y(a){return e=>{var i;let t=String((i=e.value)!=null?i:"");return{isValid:t.length>=a,errorMessage:`Too short (${t.length} / ${a})`}}}function _(a){return e=>{var i;let t=String((i=e.value)!=null?i:"");return{isValid:t.length<=a,errorMessage:`Too long (${t.length} / ${a})`}}}function aa(a){return e=>({isValid:e.value!==void 0&&e.value>=a,errorMessage:`The minimum value is ${a}`})}function ea(a){return e=>({isValid:e.value!==void 0&&e.value<=a,errorMessage:`The maximum value is ${a}`})}function ta(){return a=>({isValid:a.value?RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(a.value):!1,errorMessage:"Invalid email format"})}var R=require("vue");var N=require("vue");var v=require("vue");function k(){return`${Date.now()}-${Math.floor(Math.random()*1e3)}`}function S(a,e,t){let i=[],r=o=>`${e?"reactive":"lazy"}-${k()}`;t!=null&&(r=o=>`${t}-${o}`);for(let[o,d]of a.entries())i.push({validatorId:r(o),validator:d,optimized:!1,isReactive:e,previouslyReturnedValidators:!1,previouslySpawnedValidators:{},spawnedValidators:{}});return i}function x(a,e,t=[]){var l,y,u,s;let i=(0,v.reactive)({isValid:(0,v.computed)(()=>{var P,f;let c=(P=n.isLazyValid.value)!=null?P:!1,p=(f=n.isReactiveValid.value)!=null?f:!1;return c&&p}),isValidating:(0,v.computed)(()=>n.isValidatingReactive.value||n.isValidatingLazy.value),isErrored:(0,v.computed)(()=>i.resultsArray.some(c=>c.isValid===!1)),errorMessages:(0,v.computed)(()=>M(j(i.resultsArray,c=>c.isValid?void 0:c.errorMessage))),results:(0,v.computed)(()=>n.namedValidationResults.value),resultsArray:(0,v.computed)(()=>n.validationResults.value),arrayState:(0,v.computed)(()=>{if(Array.isArray(a.value)===!1||n.elementValidation===void 0)return[];console.time("Array state");let c=a.value,p=n.elementValidation,P=n.arrayConfigMap,f=[],A={},m,I=[];for(let g=0;g<c.length;g++){if(c[g]!==void 0&&typeof c[g]=="object"?(c[g].$ffId===void 0&&Object.defineProperty(c[g],"$ffId",{value:`${n.id}-${n.elementId++}`,writable:!1,configurable:!1,enumerable:!1}),m=c[g].$ffId):c[g]!==void 0&&(m=g),I.push(m),P[m]){f.push(P[m].validationState),A[m]=P[m];continue}if(w(p)){let T=(0,v.computed)(()=>c[g]),F=x(T,p,n.arrayParents);P[m]={validationConfigs:[F],validationState:F.validationState}}else{let T=c[g],F=$(T,p,n.arrayParents.concat(T));P[m]={validationConfigs:F.validationConfigs,validationState:F.state}}f.push(P[m].validationState),A[m]=P[m]}return n.arrayConfigMap=A,console.timeEnd("Array state"),f})}),r=!(((y=(l=e.$lazy)==null?void 0:l.length)!=null?y:-1)>0),o=!(((s=(u=e.$reactive)==null?void 0:u.length)!=null?s:-1)>0),d=e.$reactive?S(e.$reactive,!0):[],V=e.$lazy?S(e.$lazy,!1):[],n={id:k(),validationIterationId:0,isReactiveValid:(0,v.ref)(o),isValidatingReactive:(0,v.ref)(!1),reactiveProcessedValidators:d,isLazyValid:(0,v.ref)(r),isValidatingLazy:(0,v.ref)(!1),lazyProcessedValidators:V,property:a,validation:e,validationState:i,validationResults:(0,v.ref)([]),namedValidationResults:(0,v.ref)({}),arrayConfigMap:{},elementId:0,elementValidation:e.$each,arrayParents:(0,v.reactive)(t)};return n}function $(a,e,t=[]){let i=[],r={};e!==void 0&&o(a,e);function o(d,V){for(let n in V){let l=(0,v.computed)(()=>d[n]);if(w(V[n])){let y=V[n],u=x(l,y,t);i.push(u),r[n]=u.validationState}else{let y={},u=V[n];r[n]=y,o(l,u)}}}return{validationConfigs:i,state:r}}function w(a){return(a==null?void 0:a.$reactive)!==void 0||(a==null?void 0:a.$lazy)!==void 0||(a==null?void 0:a.$each)!==void 0}var z=500;function D(a,e,t,i,r){return b(this,null,function*(){let o=!0,d=(l,y,u)=>{if(i!==l.validationIterationId)return;u.isValid===!1&&(o=!1),u.id=y.validatorId;let s=l.validationResults.value.find(c=>c.id===u.id);s!==void 0?(Object.assign(s,u),u.name!==void 0&&l.namedValidationResults[u.name]!==void 0&&Object.assign(l.namedValidationResults.value[u.name],u)):(l.validationResults.value.push(u),u.name!==void 0&&(l.namedValidationResults.value[u.name]=u))},{asyncPromises:V,validatorsWhichPreviouslyReturnedValidators:n}=B(a,e,t,i,r,d,!0,1);if(yield Promise.all(V),i===a.validationIterationId){for(let l of n)for(let y of Object.keys(l.previouslySpawnedValidators))if(l.spawnedValidators[y]==null){let u=a.validationResults.value.findIndex(s=>s.id===y);u!==-1&&a.validationResults.value.splice(u)}}return o})}function B(a,e,t,i,r,o,d,V){let n=a.property.value,l=[],y=[],u=[];for(let s of r){let c=!1;s.previouslyReturnedValidators&&(s.previouslySpawnedValidators=s.spawnedValidators,s.spawnedValidators={},c=!0),s.previouslyReturnedValidators=!1;let p;if(s.computedValidator===void 0){let P={value:n,parent:e,args:t,arrayParents:a.arrayParents};p=s.validator(P)}else p=s.computedValidator.value;if(p instanceof Promise){let P=Date.now();l.push(p.then(f=>b(this,null,function*(){if(f===void 0){c&&u.push(s);return}let A=Date.now()-P;if(d&&A>z&&s.optimized===!1&&(s.optimized=!0,A<2*z?s.validator=G(s.validator,z):s.validator=h(s.validator)),Array.isArray(f)){let{asyncPromises:m,syncResults:I}=L(a,e,t,i,o,s,f,V);y.push(...I),yield Promise.all(m);return}else c&&u.push(s);o(a,s,f)})))}else if(Array.isArray(p)){let{asyncPromises:P,syncResults:f}=L(a,e,t,i,o,s,p,V);l.push(...P),y.push(...f)}else if(c&&u.push(s),p!==void 0){if(d&&s.optimized===!1){let P=s.validator;s.computedValidator=(0,N.computed)(()=>{let f={value:a.property.value,parent:e,args:t,arrayParents:a.arrayParents};return P(f)}),s.optimized=!0,s.validator=()=>s.computedValidator.value}y.push(p),o(a,s,p)}}return{asyncPromises:l,syncResults:y,validatorsWhichPreviouslyReturnedValidators:u}}function L(a,e,t,i,r,o,d,V){let n=S(d,o.isReactive,o.validatorId),l=B(a,e,t,i,n,r,!1,++V),y={};for(let u of n)y[u.validatorId]=u;return o.spawnedValidators=y,o.previouslyReturnedValidators=!0,l}function ia(a,e,t,i){return b(this,null,function*(){a.isValidatingReactive.value=!0;let r=yield D(a,e,t,i,a.reactiveProcessedValidators);return i===a.validationIterationId&&(a.isReactiveValid.value=r,a.isValidatingReactive.value=!1),a.isReactiveValid.value})}function na(a,e,t,i){return b(this,null,function*(){a.isValidatingLazy.value=!0;let r=a.lazyProcessedValidators,o=yield D(a,e,t,i,r);return i===a.validationIterationId&&(a.isLazyValid.value=o,a.isValidatingLazy.value=!1),a.isLazyValid.value})}function K(a,e,t,i,r){return b(this,null,function*(){let o=[];for(let d of a){let V=++d.validationIterationId;if(i&&d.validation.$reactive!==void 0&&o.push(yield ia(d,e.value,t,V)),r&&d.validation.$lazy!==void 0&&o.push(yield na(d,e.value,t,V)),d.elementValidation!==void 0){let n=[];for(let l in d.arrayConfigMap)n.push(...d.arrayConfigMap[l].validationConfigs);o.push(yield K(n,e,t,i,r))}}return Promise.all(o).then(d=>d.every(V=>V===!0))})}function C(a){var P;(P=a.delayReactiveValidation)!=null||(a.delayReactiveValidation=!0);let{objectToValidate:e,validation:t,delayReactiveValidation:i,args:r}=a,o=(0,R.ref)(!1),d=(0,R.computed)(()=>n.some(f=>f.validationState.isValidating)),V=(0,R.computed)(()=>n.every(A=>A.isReactiveValid.value&&A.isLazyValid.value)),n=[],l=(0,R.reactive)({}),y=(0,R.ref)(JSON.stringify(a.objectToValidate.value)),u=(0,R.computed)(()=>y.value!==JSON.stringify(a.objectToValidate.value));if(w(t)){let m=x(e,t);l=(0,R.reactive)(m.validationState),n=[m]}else{let f=e,A=t,m=$(f.value,A);l=(0,R.reactive)(m.state),n=m.validationConfigs}(0,R.watch)(a.objectToValidate,()=>{i?o.value===!0&&K(n,e,r,!0,!1):K(n,e,r,!0,!1)},{deep:!0});function c(){return b(this,null,function*(){let f=yield K(n,e,r,!0,!0);return o.value=!0,f})}function p(f){y.value=JSON.stringify(f)}return(0,R.reactive)({hasValidated:o,validate:c,isValidating:d,propertyState:(0,R.computed)(()=>l),isValid:V,setReference:p,isDirty:u})}0&&(module.exports={bufferAsync,isEmailSync,maxLength,maxNumber,minLength,minNumber,required,throttleQueueAsync,useValidation,validateIf});
